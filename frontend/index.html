<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Universal Video Downloader & Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top left, #0f0f0f, #1a1a1a, #0f0f0f); /* Deeper dark gradient */
      background-size: 200% 200%;
      animation: gradient-animation 15s ease infinite;
      color: #e2e8f0; /* Light gray text */
    }
    @keyframes gradient-animation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
    }
    .loader {
      border: 4px solid rgba(255, 255, 255, 0.2);
      border-top: 4px solid #6366f1; /* Indigo */
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      display: none;
    }
    @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
    }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center relative overflow-hidden">
    <div class="flex flex-col w-full max-w-lg mx-auto p-4 sm:p-6 lg:p-8 gap-6">
      <div class="flex flex-col gap-3 p-6 rounded-xl shadow-lg bg-zinc-900 bg-opacity-80 backdrop-blur-md border border-zinc-700">
        <h2 class="text-2xl font-semibold text-indigo-400 mb-1 tracking-tight">What Makes This Project Awesome?</h2>
        <ul class="list-disc list-inside text-zinc-200 text-base space-y-2">
          <li><span class="font-medium text-indigo-300">Universal Video Downloads:</span> Grab videos from all major social media platforms.</li>
          <li><span class="font-medium text-indigo-300">No Ads, No Nonsense:</span> 100% clean experience—no popups, no distractions.</li>
          <li><span class="font-medium text-indigo-300">Flexible Formats:</span> Download in your favorite format or extract audio only.</li>
          <li><span class="font-medium text-indigo-300">Clip Videos:</span> Trim and preview your favorite moments.</li>
          <li><span class="font-medium text-indigo-300">Format Converter:</span> Instantly convert MP4 to MP3 and more.</li>
          <li><span class="font-medium text-indigo-300">Quality Control:</span> Choose the quality you want—480p, 720p, or 1080p.</li>
          <li><span class="font-medium text-indigo-300">Fast & Reliable:</span> Simple, powerful, and always works when you need it.</li>
        </ul>
      </div>
      <div class="flex flex-col gap-4 p-8 rounded-xl shadow-lg bg-zinc-900 bg-opacity-80 backdrop-blur-md border border-zinc-700">
        <input type="text" id="videoUrlInput" placeholder="Enter video URL here" class="border border-zinc-700 bg-zinc-800 text-zinc-100 rounded-md px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-zinc-400" />
        <select id="qualitySelect" class="border border-zinc-700 bg-zinc-800 text-zinc-100 rounded-md px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <option value="best">Best Quality</option>
          <option value="1080p">1080p</option>
          <option value="720p">720p</option>
          <option value="480p">480p</option>
        </select>
        <button id="downloadBtn" class="bg-indigo-600 text-white rounded-md px-4 py-2.5 hover:bg-indigo-700 transition duration-300 ease-in-out flex items-center justify-center gap-2 shadow-md">
          Download
          <div id="downloadLoader" class="loader"></div>
        </button>
        <div class="flex flex-col sm:flex-row gap-2 mt-2">
          <a href="clip.html" class="flex-1 bg-purple-600 text-white rounded-md px-4 py-2.5 text-center hover:bg-purple-700 transition duration-300 ease-in-out flex items-center justify-center shadow-md">Clip Video</a>
          <button id="convertBtn" class="flex-1 bg-green-600 text-white rounded-md px-4 py-2.5 hover:bg-green-700 transition duration-300 ease-in-out flex items-center justify-center gap-2 shadow-md">
            Convert MP4 to MP3
            <div id="convertLoader" class="loader"></div>
          </button>
        </div>
        <p id="message" class="text-center text-sm text-zinc-300 mt-2"></p>
      </div>
    </div>

    <script>
    const backendUrl = 'http://127.0.0.1:5000';

    async function handleDownload() {
    const videoUrl = document.getElementById('videoUrlInput').value;
    const quality = document.getElementById('qualitySelect').value;
    const messageElement = document.getElementById('message');
    const downloadButton = document.getElementById('downloadBtn');
    const downloadLoader = document.getElementById('downloadLoader');

    messageElement.textContent = '';
    messageElement.style.color = '';
    downloadButton.disabled = true;
    downloadLoader.style.display = 'block';

    if (!videoUrl) {
    messageElement.textContent = 'Please enter a video URL.';
    messageElement.style.color = '#ef4444';
    downloadButton.disabled = false;
    downloadLoader.style.display = 'none';
    return;
    }

    try {
    const response = await fetch(`${backendUrl}/download`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ video_url: videoUrl, quality: quality })
    });

    const data = await response.json();

    if (!response.ok) {
    throw new Error(data.error || 'Failed to download video.');
    }

    const downloadLink = document.createElement('a');
    downloadLink.href = `${backendUrl}${data.download_link}`;
    downloadLink.download = data.filename;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);

    messageElement.textContent = 'Video download initiated!';
    messageElement.style.color = '#22c55e';

    } catch (error) {
    console.error('Download Error:', error);
    messageElement.textContent = `Error: ${error.message}`;
    messageElement.style.color = '#ef4444';
    } finally {
    downloadButton.disabled = false;
    downloadLoader.style.display = 'none';
    }
    }

    async function handleConvert() {
    const videoUrl = document.getElementById('videoUrlInput').value;
    const messageElement = document.getElementById('message');
    const convertButton = document.getElementById('convertBtn');
    const convertLoader = document.getElementById('convertLoader');

    messageElement.textContent = '';
    messageElement.style.color = '';
    convertButton.disabled = true;
    convertLoader.style.display = 'block';

    if (!videoUrl) {
    messageElement.textContent = 'Please enter a video URL to convert.';
    messageElement.style.color = '#ef4444';
    convertButton.disabled = false;
    convertLoader.style.display = 'none';
    return;
    }

    try {
    const response = await fetch(`${backendUrl}/convert_mp4_to_mp3`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ video_url: videoUrl })
    });

    const data = await response.json();

    if (!response.ok) {
    throw new Error(data.error || 'Failed to convert video to MP3.');
    }

    const downloadLink = document.createElement('a');
    downloadLink.href = `${backendUrl}${data.download_link}`;
    downloadLink.download = data.filename;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);

    messageElement.textContent = 'MP3 conversion initiated!';
    messageElement.style.color = '#22c55e';

    } catch (error) {
    console.error('Convert Error:', error);
    messageElement.textContent = `Error: ${error.message}`;
    messageElement.style.color = '#ef4444';
    } finally {
    convertButton.disabled = false;
    convertLoader.style.display = 'none';
    }
    }

    document.getElementById('downloadBtn').onclick = handleDownload;
    document.getElementById('convertBtn').onclick = handleConvert;
    </script>
  </body>
</html>

